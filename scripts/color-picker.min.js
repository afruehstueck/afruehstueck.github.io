/*!
 * ==========================================================
 *  COLOR PICKER PLUGIN 1.1.0
 * ==========================================================
 * Author: Taufik Nurrohman <http://latitudu.com>
 * License: MIT
 * ----------------------------------------------------------
 */
var CP=function(t,e){function n(t){return void 0!==t}function r(t){return"string"==typeof t}function o(t,e,n){return e>t?e:t>n?n:t}function s(t){var e,n,r,o,s,u,i,a,c=+t[0],f=+t[1],h=+t[2];switch(o=Math.floor(6*c),s=6*c-o,u=h*(1-f),i=h*(1-s*f),a=h*(1-(1-s)*f),isNaN(o)&&(o=0),isNaN(i)&&(i=0),isNaN(a)&&(a=0),o%6){case 0:e=h,n=a,r=u;break;case 1:e=i,n=h,r=u;break;case 2:e=u,n=h,r=a;break;case 3:e=u,n=i,r=h;break;case 4:e=a,n=u,r=h;break;case 5:e=h,n=u,r=i}return[Math.round(255*e),Math.round(255*n),Math.round(255*r)]}function u(t){return a(s(t))}function i(t){var e,n=+t[0],r=+t[1],o=+t[2],s=Math.max(n,r,o),u=Math.min(n,r,o),i=s-u,a=0===s?0:i/s,c=s/255;switch(s){case u:e=0;break;case n:e=r-o+i*(o>r?6:0),e/=6*i;break;case r:e=o-n+2*i,e/=6*i;break;case o:e=n-r+4*i,e/=6*i}return[e,a,c]}function a(t){var e=+t[2]|+t[1]<<8|+t[0]<<16;return e="000000"+e.toString(16),e.slice(-6)}function c(t){return i(f(t))}function f(t){return 3===t.length&&(t=t.replace(/./g,"$&$&")),[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)]}function h(t){return[+t[0]/360,+t[1]/100,+t[2]/100]}function l(t){return[Math.round(360*+t[0]),Math.round(100*+t[1]),Math.round(100*+t[2])]}function p(t,e,n){return e.addEventListener(t,n,!1)}function d(t,e,n){return e.removeEventListener(t,n)}function v(t,e){for(var n=e.touches?e.touches[0].pageX:e.pageX,r=e.touches?e.touches[0].pageY:e.pageY,o=g(t).l,s=g(t).t;t=t.offsetParent;)o+=g(t).l,s+=g(t).t;return{x:n-o,y:r-s}}function g(t){return{l:t.offsetLeft,t:t.offsetTop}}function m(t,e){for(;(t=t.parentElement)&&t!==e;);return t}function y(t){t&&t.preventDefault()}function x(t){return{w:t.offsetWidth,h:t.offsetHeight}}function b(t){return L||(n(t)?t:!1)}function H(t){L=t}function k(t,e,r){return n(t)?n(e)?(n(R[t])||(R[t]={}),n(r)||(r=Object.keys(R[t]).length),R[t][r]=e,G):R[t]:R}function w(t,e){return n(t)?n(e)?(delete R[t][e],G):(R[t]={},G):(R={},G)}function M(t,e,r){if(!n(R[t]))return G;if(n(r))n(R[t][r])&&R[t][r].apply(G,e);else for(var o in R[t])R[t][o].apply(G,e);return G}function E(t,e){t&&"h"!==t||M("change:h",e),t&&"sv"!==t||M("change:sv",e),M("change",e)}function S(t,e){return C.setTimeout(t,e)}function N(){return T.parentNode}function V(){var e=x(I).w,n=C.innerHeight,r=Math.max(j.scrollLeft,I.scrollLeft),o=Math.max(j.scrollTop,I.scrollTop),s=e+r,u=n+o;return K=g(t).l,Q=g(t).t+x(t).h,K+U>s&&(K=s-U),Q+Z>u&&(Q=u-Z),T.style.left=K+"px",T.style.top=Q+"px",M("fit",[G]),G}function X(n,r){function i(e){var n=e.target,r=n===t||m(n,t)===t;r?X():_(),M(r?"enter":"exit",[G])}function a(t){var e=(s(P),s([P[0],1,1]));A.style.backgroundColor="rgb("+e.join(",")+")",H(P),y(t)}function c(t){var e=o(v(Y,t).y,0,w);P[0]=(w-e)/w,D.style.top=e-R/2+"px",a(t)}function f(t){var e=v(A,t),n=o(e.x,0,S),r=o(e.y,0,L);P[1]=1-(S-n)/S,P[2]=(L-r)/L,O.style.right=S-n-I/2+"px",O.style.top=r-z/2+"px",a(t)}function h(t){F&&(c(t),te=u(P),W||(M("drag:h",[te,G]),M("drag",[te,G]),E("h",[te,G]))),J&&(f(t),te=u(P),q||(M("drag:sv",[te,G]),M("drag",[te,G]),E("sv",[te,G]))),W=!1,q=!1}function l(n){var r=n.target,o=F?"h":"sv",s=[u(P),G],i=r===t||m(r,t)===t,a=r===T||m(r,T)===T;i||a?a&&(M("stop:"+o,s),M("stop",s),E(o,s)):N()&&e!==!1&&(_(),M("exit",[G]),E(0,s)),F=!1,J=!1}function g(t){W=!0,F=!0,h(t),y(t),M("start:h",[te,G]),M("start",[te,G]),E("h",[te,G])}function k(t){q=!0,J=!0,h(t),y(t),M("start:sv",[te,G]),M("start",[te,G]),E("sv",[te,G])}n||((r||j).appendChild(T),G.visible=!0),U=x(T).w,Z=x(T).h;var w=x(Y).h,S=x(A).w,L=x(A).h,R=x(D).h,I=x(O).w,z=x(O).h;if(n){if(T.style.left="-9999px",T.style.top="-9999px",e!==!1)for(var K=e.length;K--;)p(e[K],t,i);G.create=function(){return X(1),M("create",[G]),G},G.destroy=function(){if(e!==!1)for(var n=e.length;n--;)d(e[n],t,i);return _(),H(!1),M("destroy",[G]),G}}else V();$=function(){P=b(P),a(),D.style.top=w-R/2-w*+P[0]+"px",O.style.right=S-I/2-S*+P[1]+"px",O.style.top=L-z/2-L*+P[2]+"px"},_=function(){return N()&&(N().removeChild(T),G.visible=!1),d("touchstart",Y,g),d("mousedown",Y,g),d("touchstart",A,k),d("mousedown",A,k),d("touchmove",B,h),d("mousemove",B,h),d("touchend",B,l),d("mouseup",B,l),d("resize",C,V),G},$(),n||(p("touchstart",Y,g),p("mousedown",Y,g),p("touchstart",A,k),p("mousedown",A,k),p("touchmove",B,h),p("mousemove",B,h),p("touchend",B,l),p("mouseup",B,l),p("resize",C,V))}var C=window,B=document,G=this,L=!1,R={},T=B.createElement("div");n(e)||(e=["mousedown","touchstart"]),G.parse=function(t){if("object"==typeof t)return t;var e=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(t),n=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(t),r="#"===t[0]&&t.match(/^#([\da-f]{3}|[\da-f]{6})$/);return r?c(t.slice(1)):n?h([+n[1],+n[2],+n[3]]):e?i([+e[1],+e[2],+e[3]]):[0,1,1]},H(G.parse(t.getAttribute("data-color")||t.value||[0,1,1])),T.className="color-picker",T.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var $,_,j=B.body,I=B.documentElement,z=T.firstChild.children,P=b([0,1,1]),Y=z[0],A=z[1],D=Y.firstChild,O=A.firstChild,W=!1,q=!1,F=!1,J=!1,K=0,Q=0,U=0,Z=0,te=u(P);return X(1),S(function(){var t=[u(P),G];M("create",t),E(0,t)},0),G.target=t,G.picker=T,G.visible=!1,G.on=k,G.off=w,G.trigger=M,G.fit=V,G.set=function(t){return n(t)?(r(t)&&(t=G.parse(t)),H(t),$(),G):b()},G.HSV2RGB=function(t){return s(h(t))},G._HSV2RGB=s,G.HSV2HEX=function(t){return u(h(t))},G._HSV2HEX=u,G.RGB2HSV=function(t){return l(i(t))},G._RGB2HSV=i,G.RGB2HEX=a,G.HEX2HSV=function(t){return l(c(t))},G._HEX2HSV=c,G.HEX2RGB=f,G.hooks=R,G.enter=function(t){return X(0,t)},G.exit=_,G};